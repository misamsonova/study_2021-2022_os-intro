---
## Front matter
lang: ru-RU
title: Краткий отчёт по лабораторной работе №12
author: Samsonova Maria, Student of RUDN University, Moscow, Russian Federation
institute: RUDN University, Moscow, Russian Federation

Date: 27-05-2022

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---
# Цель выполнения лабораторной работы №12

Изучить основы программирования в оболочке ОС UNIX. Научиться писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

# Задание

1. Написать командный файл, реализующий упрощённый механизм семафоров. Командный файл должен в течение некоторого времени t1 дожидаться освобождения
ресурса, выдавая об этом сообщение, а дождавшись его освобождения, использовать
его в течение некоторого времени t2<>t1, также выдавая информацию о том, что
ресурс используется соответствующим командным файлом (процессом). Запустить
командный файл в одном виртуальном терминале в фоновом режиме, перенаправив
его вывод в другой (> /dev/tty#, где # — номер терминала куда перенаправляется
вывод), в котором также запущен этот файл, но не фоновом, а в привилегированном
режиме. Доработать программу так, чтобы имелась возможность взаимодействия трёх
и более процессов.

2. Реализовать команду man с помощью командного файла. Изучите содержимое каталога /usr/share/man/man1. В нем находятся архивы текстовых файлов, содержащих
справку по большинству установленных в системе программ и команд. Каждый архив
можно открыть командой less сразу же просмотрев содержимое справки. Командный
файл должен получать в виде аргумента командной строки название команды и в виде
результата выдавать справку об этой команде или сообщение об отсутствии справки,
если соответствующего файла нет в каталоге man1.

3. Используя встроенную переменную $RANDOM, напишите командный файл, генерирующий случайную последовательность букв латинского алфавита. Учтите, что $RANDOM
выдаёт псевдослучайные числа в диапазоне от 0 до 32767.4. 

# Ход выполнения лабораторной работы №12

1. Для начала написали командный файл, реализующий упрощённый механизм семафоров. Командный файл должен в течение некоторого времени t1 дожидаться освобождения ресурса, выдавая об этом сообщение, а дождавшись  его  освобождения,  использовать  его  в  течение некоторого времени t2<>t1, также выдавая информацию о том, что ресурс используется соответствующим командным файлом (процессом). Для данной задачи мы создали файл: sem.sh (рис. -@fig:001 ) и написали соответствующий скрипт (рис. -@fig:002 ).

![Создание файла](image/1.png){ #fig:001 width=70% }

![Скрипт №1](image/2.png){ #fig:002 width=70% }

- Далее мы проверили работу написанного скрипта (команда«./sem.sh47»), предварительно добавив право на исполнение файла (команда **«chmod +x sem.sh»**) (рис. -@fig:003 ). Скрипт работает корректно.

![Проверка работы скрипта](image/3.png){ #fig:003 width=70% }

- После этого мы изменили скрипт так, чтобы его можно было выполнить в нескольких терминалах и проверили  его  работу (например,  команда **«./sem.sh 2 3 Ожидание > /dev/pts/1 &»**) (рис. -@fig:004 , -@fig:005 , -@fig:006 ). Однако у нас не получилось проверить работу скрипта, так как было отказно в доступе. 

![Изменённый скрипт №1](image/4.png){ #fig:004 width=70% }

![Изменённый скрипт №1](image/5.png){ #fig:005 width=70% }

![Проверка работы скрипта](image/6.png){ #fig:006 width=70% }

2. Теперь реализовали команду man с помощью командного файла. Изучили содержимое  каталога  /usr/share/man/man1 (рис. -@fig:007 , -@fig:008 ). В нем находятся архивы текстовых  файлов, содержащих справку по большинству установленных в системе программ и команд. Каждый архив  можно  открыть  командой less, сразу же просмотрев содержимое  справки.  Командный  файл  должен  получать в виде аргумента командной строки название команды и в виде результата выдавать справку об  этой  команде  или  сообщение  об  отсутствии справки, если соответствующего файла нет в каталоге man1. 

![Реализацимы команды man](image/7.png){ #fig:007 width=70% }

![Реализацимы команды man](image/8.png){ #fig:008 width=70% }

- Для данной задачи мы создали файл: man.sh (рис. -@fig:009 ) и написали соответствующий скрипт. 

![Создание файла](image/9.png){ #fig:009 width=70% }

- Далее мы проверили работу написанного скрипта (команды **«./man.sh ls»** и **«./man.sh mkdir»**), предварительно добавив  право  на  исполнение  файла (команда **«chmod +x man.sh»**) (рис. -@fig:010 ). Скрипт работает корректно.

![Скрипт №2](image/10.png){ #fig:010 width=70% }

![Проверка работы скрипта](image/11.png){ #fig:011 width=70% }

![Проверка работы скрипта](image/00.png){ #fig:012 width=70% }

![Проверка работы скрипта](image/01.png){ #fig:013 width=70% }

3. Используя встроенную переменную $RANDOM, написали командный файл, генерирующий случайную последовательность букв латинского алфавита. Для данной задачи мы создали файл: random.sh (рис. -@fig:014 ) и написали соответствующий скрипт (рис. -@fig:015 ).

![Создание файла](image/12.png){ #fig:014 width=70% }

![Скрипт №3](image/13.png){ #fig:015 width=70% }

Далее мы проверили работу написанного скрипта (команды **«./random.sh 6»** и **«./random.sh 20»**), предварительно  добавив  право  на  исполнение  файла (команда **«chmod +x random.sh»**) (рис. -@fig:014 ). Скрипт работает корректно.

![Проверка работы скрипта](image/14.png){ #fig:016 width=70% }

# Вывод выполнения лабораторной работы №12

В процессе выполнения данной лабораторной работы мы изучили основы программирования в оболочке ОС UNIX и научились писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.